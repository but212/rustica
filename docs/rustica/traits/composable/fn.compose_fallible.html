<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Composes two fallible functions that return Results."><title>compose_fallible in rustica::traits::composable - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../static.files/rustdoc-84e720fa.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="rustica" data-themes="" data-resource-suffix="" data-rustdoc-version="1.89.0-nightly (44f415c1d 2025-06-06)" data-channel="nightly" data-search-js="search-f7877310.js" data-settings-js="settings-5514c975.js" ><script src="../../../static.files/storage-4e99c027.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../static.files/main-fd3af306.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-32bb7600.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-044be391.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../rustica/index.html">rustica</a><span class="version">0.7.1</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">compose_<wbr>fallible</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#type-parameters" title="Type Parameters">Type Parameters</a></li><li><a href="#arguments" title="Arguments">Arguments</a></li><li><a href="#returns" title="Returns">Returns</a></li><li><a href="#examples" title="Examples">Examples</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="index.html">In rustica::<wbr>traits::<wbr>composable</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../../index.html">rustica</a>::<wbr><a href="../index.html">traits</a>::<wbr><a href="index.html">composable</a></div><h1>Function <span class="fn">compose_fallible</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../src/rustica/traits/composable.rs.html#521-528">Source</a> </span></div><pre class="rust item-decl"><code>pub fn compose_fallible&lt;A, B, C, E, F, G&gt;(
    f: F,
    g: G,
) -&gt; impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(A) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;C, E&gt;<div class="where">where
    F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(A) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;B, E&gt;,
    G: <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>(B) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;C, E&gt;,</div></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Composes two fallible functions that return Results.</p>
<p>This function composes two functions where both can return errors. If the first function
returns an error, that error is propagated. Otherwise, the second function is applied
to the success value of the first function.</p>
<h2 id="type-parameters"><a class="doc-anchor" href="#type-parameters">ยง</a>Type Parameters</h2>
<ul>
<li><code>A</code>: Input type of the first function</li>
<li><code>B</code>: Intermediate type (output of first function, input to second function)</li>
<li><code>C</code>: Output type of the second function</li>
<li><code>E</code>: Error type for both functions</li>
<li><code>F</code>: Type of the first function</li>
<li><code>G</code>: Type of the second function</li>
</ul>
<h2 id="arguments"><a class="doc-anchor" href="#arguments">ยง</a>Arguments</h2>
<ul>
<li><code>f</code>: First fallible function</li>
<li><code>g</code>: Second fallible function</li>
</ul>
<h2 id="returns"><a class="doc-anchor" href="#returns">ยง</a>Returns</h2>
<p>A new function that returns a Result, propagating errors or applying both functions</p>
<h2 id="examples"><a class="doc-anchor" href="#examples">ยง</a>Examples</h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>rustica::traits::composable::compose_fallible;
<span class="kw">use </span>std::num::ParseIntError;

<span class="comment">// Define two fallible functions
</span><span class="kw">fn </span>parse_string(s: <span class="kw-2">&amp;</span>str) -&gt; <span class="prelude-ty">Result</span>&lt;i32, ParseIntError&gt; {
    s.parse::&lt;i32&gt;()
}

<span class="kw">fn </span>double_if_positive(n: i32) -&gt; <span class="prelude-ty">Result</span>&lt;i32, <span class="kw-2">&amp;</span><span class="lifetime">'static </span>str&gt; {
    <span class="kw">if </span>n &gt; <span class="number">0 </span>{
        <span class="prelude-val">Ok</span>(n * <span class="number">2</span>)
    } <span class="kw">else </span>{
        <span class="prelude-val">Err</span>(<span class="string">"Number was not positive"</span>)
    }
}

<span class="comment">// Compose them with error type conversion
</span><span class="kw">let </span>composed = compose_fallible(
    |s| parse_string(s).map_err(|<span class="kw">_</span>| <span class="string">"Parse error"</span>),
    double_if_positive
);

<span class="macro">assert_eq!</span>(composed(<span class="string">"5"</span>), <span class="prelude-val">Ok</span>(<span class="number">10</span>));
<span class="macro">assert_eq!</span>(composed(<span class="string">"-5"</span>), <span class="prelude-val">Err</span>(<span class="string">"Number was not positive"</span>));
<span class="macro">assert_eq!</span>(composed(<span class="string">"not_a_number"</span>), <span class="prelude-val">Err</span>(<span class="string">"Parse error"</span>));</code></pre></div>
</div></details></section></div></main></body></html>